

## HTTP 是什么

全称：超文本传输协议（`HyperText Transfer Protocol`）

概念：HTTP 是一种能够获取 HTML、图片等网络资源的通讯协议。它是 web 上进行数据交换的基础，是一种 `client-server` 协议



## HTTP协议优缺点

### HTTP 特点

1. **灵活可扩展**：主要提现在两个方面。一个是语义上的自由，只规定的基本格式，比如空格分隔单词，换行分隔字段，其他的各个部分都没有严格的语法限制。另一个是传输形式的多样性，不仅仅可以传输文本，还能传输图片、视频等任意数据，非常方便。
2. **可靠传输**：HTTP 是基于 TCP/IP 的，因此把这一特性继承了下来。
3. **请求-应答模式**：也就是`一发一收`、`有来有回`， 当然这个请求方和应答方不单单指客户端和服务器之间，如果某台服务器作为代理来连接后端的服务端，那么这台服务器也会扮演**请求方**的角色。
4. **无状态**：（需要分场景）这里的状态指**通信过程的上下文信息**，而每次 http 请求都是独立、无关的，默认不需要保留状态信息。

### HTTP 缺点

1. **无状态**：分场景，对于 HTTP 而言，最具争议的地方在于它的 **无状态**。
   - 在需要长连接的场景中，需要保存大量的上下文信息，以免传输大量重复的信息，那么这时候无状态就是 http 的缺点了。
   - 但与此同时，另外一些应用仅仅是为了获取一些数据，不需要保存连接上下文信息，无状态反而减少了网络开销，成为了 http 的优点。
2. **明文传输**：即协议里的报文（主要指的是头部）不使用二进制数据，而是文本形式。
   - 这当然对于调试提供了便利，但同时也让 HTTP 的报文暴露给了外界，给攻击者也提供了遍历。`Wifi 陷阱`就是利用 HTTP 明文传输的缺点，诱导你连上热点，然后疯狂抓取你所有的溜了。从而拿到你的敏感信息。
3. **队友阻塞**：当 http 开启长连接时，共用一个 TCP 连接，同一个时刻只能处理一个请求，那么当前请求耗时过长的情况下，其他的请求只能处于阻塞状态，这也就是著名的**队头阻塞问题**。

## HTTP 报文结构

对于 TCP 而言，在传输的时候分为两个部分：**TCP 头** 和 **数据部分**

而 HTTP 类似，也是 `header + body` 的结构，具体而言：`起始行 + 头部 + 空行 + 实体 `。

由于 HTTP **请求报文**和**响应报文**是有一定区别的，因此分开介绍

![HTTP请求数据格式](assets/1731a08c0a1dc8f3)

- 请求行包括：`请求方法字段 + URL 字段 + HTTP协议版本字段` 
- 请求报文——请求体：具体的数据

![服务器响应的数据格式](assets/1731a091ba9262f5)

- 响应行：也叫状态行，由 `http 版本 + 状态码 + 原因` 三个部分组成。
- 响应报文——响应体：具体的数据

不管是请求头还是响应头，其中的字段是相当多的，而且牵扯到 http 非常多的特性，重点看看这些头部字段的格式：

头部由关键字/值对组成，每行一对，关键字和值用 `:` 分隔。

## HTTP 的请求方法

- HTTP 1.0 定义了三种请求方法：GET，POST 和 HEAD 方法。
- HTTP 1.1 新增了五种请求方法：OPTIONS，PUT，DELETE，TRACE 和 CONNECT。

`http/1.1` 规定了以下请求方法（注意，都是大写）：

- `GET`：通常用于请求服务器发送某些资源
- `HEAD`：请求资源的头部信息，并且这些头部与 `GET` 方法请求时返回一致（使用场景：在下载一个大文件前先获取其大小再决定是否要下载，以此节约带宽资源）
- `POST`：发送数据给服务器，即上传数据
- `PUT`：请求服务器存储一个资源（修改数据）
- `DELETE`：删除指定的资源
- `CONNECT`：建立连接隧道，用于代理服务器
- `OPTIONS`：列出可对资源实行的请求方法，用来跨域请求
- `TRACE`：追踪请求-响应的传输路径
- `PATCH`： 用于对资源应用部分修改（新增）

### GET 和 POST 有什么区别？

> 引入副作用和幂等的概念：
>
> 副作用是指对服务器上的资源做改变，搜索是无副作用的，注册是有副作用的。
>
> 幂等指发送 M 和 N 个请求（两者不相同且都大于1），服务器上资源的状态一致。比如说，注册 10 个和 11 个账户是不幂等的，对文章修改 10 次和 11 次是幂等的。因为前者是多了一个账户（资源），后者只是更新同一个资源。

在规范的应用场景上说，**GET 多用于无副作用，幂等的场景**，例如搜索关键字；**POST 多用于副作用，不幂等的场景**，例如注册。

在技术上说：

- **缓存**：GET 请求后浏览器会主动缓存，POST 默认情况下不能。
- **参数**：GET 请求一般放在 URL 中（当然也可以写在请求体里）通过历史记录、缓存很容易查到数据信息，因此不安全，POST 请求放在请求体中，相对而言较为安全，更适合传输敏感信息，但是在抓包的情况下都是一样的。
- **限制**：关于 URL 有长度限制，这是浏览器规定的
- **编码**：GET 只能进行 URL 编码，只能接收 ASCII 字符，而 POST 支持更多的编码类型且不对数据类型限制。
- **TCP 角度**：GET 请求会把请求报文一次性发出去，而 POST 会分为两个 TCP 数据包，首先发送 `header` 部分，如果服务器响应 100 (continue)，然后发送 body 部分。（火狐浏览器除外，它的 POST 请求只发一个 TCP 包）。
- **GET 无害**：（其实就是指幂等性）刷新、后退等浏览器操作 GET 请求是无副作用的，而 POST 可能重复提交表单。






## 状态码

https://www.jianshu.com/p/369db1ba04ea

掘金小册

## GET POST 区别